---
layout: post
title:  "[코드스쿼드] 프론트엔드 Lv3 - HTTP 이해"
subtitle:   "코드스쿼드"
categories: devlog
tags: javascript
comments: true
---

### 웹 자판기 - HTTP의 이해

브라우저에서 [네이버](https://www.naver.com/)로 접근한다. 브라우저에서 서버에 요청을 보내고 응답을 받아 화면에 출력하기 까지의 과정은 어떻게 될까? 

---

#### [검색 전 & 학습 전]

1. 일단 사용자의 클라이언트(브라우저)에서 네이버로 가는 IP주소를 찾기위해 DNS 서버로 접근 후 요청한다.
2. DNS 서버에서 네이버의 본래 IP 주소를 담은 정보를 응답받고 해당 IP 주소로 접근하기 전에 클라이언트(브라우저)의 Cache 쪽으로 접근한 후, 네이버에 방문한 기록(헤더파일) 이 있는지 확인한다.
3. 헤더파일이 있다면, 마지막으로 업데이트 한 날짜를 확인한다(?)
4. 이후, 네이버쪽에 헤더파일을 요청한 후, 업데이트 한 날짜가 동일하다면 Cache 에서 빠르게 불러온 후, 클라이언트(브라우저)에 출력한다.
5. 그러나 네이버쪽의 업데이트 날짜가 최신이라면 변경된 내용만 요청한다.
6. 그리고 네이버쪽에서 응답받은 후, 클라이언트(브라우저)에 출력한다.

---

#### **[학습 해야할 것]**

1. 브라우저는 `IP:PORT` 형식으로 **웹 서버와 연결**함 (기본포트 80)

2. 웹 서버에 **요청**을 보냄

3. 웹 서버는 **HTML을 생성**한 후 **응답**을 보냄

4. 브라우저는 응답을 받은 후 웹서버와의 **연결을 끊음**

5. 브라우저는 응답 헤더와 HTML을 읽은 후, 웹 자원에 대한 **재 요청**을 함
   대표적인 웹 자원은 `JavaScript, CSS, Image` 등 이 존재함

6. **HTTP (Hypertext Transfer Protocol)**

   - HTTP (Hypertext Transfer Protocol) is perhaps the most popular application protocol used in the Internet (or The WEB). 
   - HTTP is a stateless protocol. In other words, the current request does not know what has been done in the previous requests.
   - HTTP permits negotiating of data type and representation, so as to allow systems to be built independently of the data being transferred.

7. **URL (Uniform Resource Locator) URI (Uniform Resource Locator)**

   A URL (Uniform Resource Locator) is used to uniquely identify a resource over the web. URL has the following syntax: 

   ```
   protocol://hostname:port/path-and-file-name
   ```

   - *Protocol*: The application-level protocol used by the client and server, e.g., HTTP, FTP, and telnet.
   - *Hostname*: The DNS domain name (e.g., `www.nowhere123.com`) or IP address (e.g., 192.128.1.2) of the server. OR 리소스가 존재하는 컴퓨터 이름
   - *Port*: The TCP port number that the server is listening for incoming requests from the clients.
   - *Path-and-file-name*: The name and location of the requested resource, under the server document base directory.
   - Scheme : 리소스를 획득하기 위한 방법 (Ex. HTTP, FTP, file, mailto)

8. **HTTP over TCP/IP**

   ![](https://i.imgur.com/IXsUXAs.png)

9. **HTTP와 관련된 알아야 할 용어들**

   - URL
   - Request Line
   - HTTP Method
   - Query String
   - Status Line
   - Status Code

10. **Request Line**

    The first line of the header is called the *request line*, followed by optional *request headers*. 

    ```
    request-method-name request-URI HTTP-version
    ```

    - *request-method-name*: HTTP protocol defines a set of request methods, e.g., GET, POST, HEAD, and OPTIONS. The client can use one of these methods to send a request to the server.
    - *request-URI*: specifies the resource requested.
    - *HTTP-version*: Two versions are currently in use: HTTP/1.0 and HTTP/1.1.

    ```javascript
    // EXAMPLE
    GET /test.html HTTP/1.1
    HEAD /query.html HTTP/1.0
    POST /index.html HTTP/1.1
    ```

11. **HTTP Request Method**

    ![](https://i.imgur.com/DrbDBSi.png)

    HTTP protocol defines a set of request methods. A client can use one of these request methods to send a request message to an HTTP server. The methods are: 

    - GET: A client can use the GET request to get a web resource from the server.
    - HEAD: A client can use the HEAD request to get the header that a GET request would have obtained. Since the header contains the last-modified date of the data, this can be used to check against the local cache copy.
    - POST: Used to post data up to the web server.
    - PUT: Ask the server to store the data.
    - DELETE: Ask the server to delete the data.
    - TRACE: Ask the server to return a diagnostic trace of the actions it takes.
    - OPTIONS: Ask the server to return the list of request methods it supports.
    - CONNECT: Used to tell a proxy to make a connection to another host and simply reply the content, without attempting to parse or cache it. This is often used to make SSL connection through the proxy.
    - Other extension methods.

12. **Query String**

    Each field has a *name* and can take on a specified *value*. Once the client fills in the fields and hits the submit button, the browser gathers each of the fields' name and value, packed them into "`name=value`" pairs, and concatenates all the fields together using "`&`" as the field separator. 

    It will send the query string to the server as part of the request. 

    ```HTML
    name1=value1&name2=value2&name3=value3&...
    ```

    Special characters are not allowed inside the query string. They must be replaced by a "`%`" followed by the ASCII code in Hex. E.g., "`~`" is replaced by "`%7E`", "`#`" by "`%23`" and so on. Since blank is rather common, it can be replaced by either "`%20`" or "`+`" (the "`+`" character must be replaced by "`%2B`"). This replacement process is called *URL-encoding*, and the result is a *URL-encoded query string*. For example, suppose that there are 3 fields inside a form, with name/value of "name=Peter Lee", "address=#123 Happy Ave" and "language=C++", the URL-encoded query string is: 

    ```HTML
    name=Peter+Lee&address=%23123+Happy+Ave&Language=C%2B%2B
    ```

    The query string can be sent to the server using either HTTP GET or POST request method, which is specified in the `<form>`'s attribute "`method`". 

    ```HTML
    <form method="get|post" action="url">
    ```

    If GET request method is used, the URL-encoded query string will be *appended* behind the *request-URI* after a "`?`" character, i.e., 

    ```HTML
    GET request-URI?query-string HTTP-version
    (other optional request headers)
    (blank line)
    (optional request body)
    ```

    Using GET request to send the query string has the following drawbacks:

    - The amount of **data** you could **append** behind *request-URI* is **limited**. If this amount exceed a server-specific threshold, the server would return an error **"414 Request URI too Large"**.
    - The URL-encoded query string would appear on the address box of the browser.
      - ID 및 PASSWORD 가 QueryString 에 표시되는 보안적인 문제가 있음(?)

13. **Status Line**

    The first line is called the *status line*, followed by optional response header(s). 

    The status line has the following syntax: 

    ```HTML
    HTTP-version status-code reason-phrase
    ```

    - *HTTP-version*: The HTTP version used in this session. Either HTTP/1.0 and HTTP/1.1.
    - *status-code*: a 3-digit number generated by the server to reflect the outcome of the request.
    - *reason-phrase*: gives a short explanation to the status code.
    - Common status code and reason phrase are "200 OK", "404 Not Found", "403 Forbidden", "500 Internal Server Error".

    ```HTML
    HTTP/1.1 200 OK
    HTTP/1.0 404 Not Found
    HTTP/1.1 403 Forbidden
    ```
